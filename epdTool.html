<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decision Assistant</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{box-sizing:border-box;font-family:Segoe UI,Tahoma}
body{background:#f5f8ff;padding:20px}
.container{max-width:1200px;margin:auto;background:#fff;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,.08)}
header{background:linear-gradient(135deg,#4a6fa5,#3a5980);color:#fff;padding:30px;text-align:center}
.main-content{display:flex;flex-wrap:wrap}
.input-section{flex:1;min-width:300px;padding:25px;border-right:1px solid #ddd;background:#f9fbff}
.results-section{flex:2;min-width:400px;padding:25px}
.section-title{color:#3a5980;margin-bottom:15px;border-bottom:2px solid #ddd}
input,textarea,select{width:100%;padding:10px;margin-bottom:10px;border-radius:6px;border:1px solid #ccc}
textarea{resize:vertical}
.btn{background:#4a6fa5;color:#fff;border:none;padding:12px;border-radius:6px;width:100%;cursor:pointer}
.btn:hover{background:#3a5980}
.btn-add{background:#5a8a5a}
.options-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px}
.option-card{border:1px solid #ddd;padding:15px;border-radius:8px}
.option-score{background:#4a6fa5;color:#fff;padding:3px 8px;border-radius:15px;font-size:.85rem}
.highlight{background:#eef2ff}
.reason{margin-top:10px;font-size:.9rem;color:#444}
.option-item{display:flex;gap:8px}
.option-item button{background:#d9534f;border:none;color:#fff;padding:0 10px;border-radius:6px;cursor:pointer}
footer{text-align:center;padding:15px;color:#666}
@media(max-width:900px){.main-content{flex-direction:column}.input-section{border-right:none}}
</style>
</head>

<body>
<div class="container">
<header>
<h1><i class="fas fa-balance-scale"></i> Decision Assistant</h1>
<p>Compare options and understand trade-offs</p>
</header>

<div class="main-content">
<div class="input-section">
<h3 class="section-title">Decision</h3>
<input id="decision-title" placeholder="Decision title">
<textarea id="decision-context" placeholder="Context"></textarea>

<h3 class="section-title">Options</h3>
<div id="options-list">
  <div class="option-item">
    <input class="option-input" placeholder="Option 1">
    <button onclick="removeOption(this)">✕</button>
  </div>
  <div class="option-item">
    <input class="option-input" placeholder="Option 2">
    <button onclick="removeOption(this)">✕</button>
  </div>
</div>
<button class="btn btn-add" onclick="addOption()">Add Option</button>

<h3 class="section-title">Criteria</h3>
<div id="criteria-list">
<div class="criterion-item">
<input class="criterion-input" value="Cost">
<select class="criterion-weight">
<option value="1">Low</option>
<option value="2" selected>Medium</option>
<option value="3">High</option>
<option value="5">Critical</option>
</select>
</div>
<div class="criterion-item">
<input class="criterion-input" value="Quality">
<select class="criterion-weight">
<option value="1">Low</option>
<option value="2">Medium</option>
<option value="3" selected>High</option>
<option value="5">Critical</option>
</select>
</div>
</div>

<button class="btn btn-add" id="add-criterion">Add Criterion</button>
<br><br>
<button class="btn" id="analyze-btn">Analyze</button>
</div>

<div class="results-section">
<h3 class="section-title">Results</h3>
<div id="results"></div>
</div>
</div>

<footer>Decision Assistant Tool</footer>
</div>

<script>
const analyzeBtn = document.getElementById("analyze-btn");
const addCriterionBtn = document.getElementById("add-criterion");
const criteriaList = document.getElementById("criteria-list");
const optionsList = document.getElementById("options-list");
const resultsDiv = document.getElementById("results");

/* OPTIONS */
function addOption(){
  const div = document.createElement("div");
  div.className = "option-item";
  div.innerHTML = `
    <input class="option-input" placeholder="New Option">
    <button onclick="removeOption(this)">✕</button>`;
  optionsList.appendChild(div);
}

function removeOption(btn){
  if (optionsList.children.length <= 2) {
    alert("At least 2 options are required");
    return;
  }
  btn.parentElement.remove();
}

/* CRITERIA */
addCriterionBtn.onclick = () => {
  const div = document.createElement("div");
  div.className = "criterion-item";
  div.innerHTML = `
    <input class="criterion-input" placeholder="Criterion">
    <select class="criterion-weight">
      <option value="1">Low</option>
      <option value="2" selected>Medium</option>
      <option value="3">High</option>
      <option value="5">Critical</option>
    </select>`;
  criteriaList.appendChild(div);
};

/* ANALYSIS */
analyzeBtn.onclick = () => {
  const title = document.getElementById("decision-title").value.trim();
  if (!title) { alert("Enter decision title"); return; }

  const options = [...document.querySelectorAll(".option-input")]
    .map(o => o.value.trim())
    .filter(Boolean);

  if (options.length < 2) { alert("Enter at least 2 options"); return; }

  const criteria = [];
  document.querySelectorAll(".criterion-item").forEach(c => {
    const name = c.querySelector(".criterion-input").value.trim();
    const weight = parseInt(c.querySelector(".criterion-weight").value);
    if (name) criteria.push({ name, weight });
  });

  if (criteria.length < 2) { alert("Add at least 2 criteria"); return; }

  const results = [];

  options.forEach(opt => {
    let total = 0, weightSum = 0;
    let breakdown = [];

    criteria.forEach(c => {
      const score = Math.floor(Math.random() * 4) + 6;
      total += score * c.weight;
      weightSum += c.weight;
      breakdown.push({ criterion:c.name, weight:c.weight, weighted:score*c.weight });
    });

    results.push({ name: opt, score: (total/weightSum).toFixed(1), breakdown });
  });

  results.sort((a,b)=>b.score-a.score);
  renderResults(results);
};

function renderResults(results){
  const top = results[0];
  const others = results.slice(1);

  const reason = top.breakdown
    .filter((b,i)=> b.weighted > (others.reduce((s,o)=>s+o.breakdown[i].weighted,0)/others.length))
    .map(b=>`${b.criterion} (weight ${b.weight})`)
    .join(", ");

  let html = "<div class='options-container'>";
  results.forEach((r,i)=>{
    html+=`
    <div class="option-card ${i===0?'highlight':''}">
      <h4>${r.name} <span class="option-score">${r.score}</span></h4>
      ${i===0 && reason ? `<div class="reason">Best due to strong performance in <b>${reason}</b>.</div>` : ""}
    </div>`;
  });
  html+="</div>";
  resultsDiv.innerHTML = html;
}
</script>
</body>
</html>

